
-- Author: 	Hussain refaa
-- creation Date: 	2017
-- Last Updated: 	0000-00-00
-- Control Number:	xxxx-xxxx-xxxx-xxxx
-- Version: 	0.0
-- Phone : +4915775148443
-- Email: refaa.hussain@gmail.com

sqlplus demo_pdb_admin/password@localhost:1521/demo_pdb

select sequence_name, min_value, max_value, increment_by from user_sequences;

create table test_table
(col1 int generated as identity primary key,
col2 varchar2(30));

select * from test_table;

insert into test_table (col2) values ('hello!');
insert into test_table (col2) values ('world!');
commit;

select * from test_table;

column table_name format a30
column column_name format a30
select table_name, column_name, IDENTITY_COLUMN from user_tab_columns;

SET LINESIZE 150
COLUMN table_name FORMAT A20
COLUMN column_name FORMAT A15
COLUMN generation_type FORMAT A10
COLUMN identity_options FORMAT A50

SELECT table_name,  column_name, generation_type, identity_options
FROM user_tab_identity_cols
ORDER BY 1, 2;

CONN / AS SYSDBA

ALTER SESSION SET CONTAINER=demo_pdb;

COLUMN sequence_name FORMAT A30
COLUMN table_name FORMAT A30
SELECT a.name AS table_name, b.name AS sequence_name
FROM sys.idnseq$ c JOIN obj$ a ON c.obj# = a.obj# JOIN obj$ b ON c.seqobj# = b.obj#;

create table test_table2 (col1 int generated by default as identity
(start with 42 increment by 100 )  primary key,
col2 varchar2(30));


insert into test_table2 (col2) values ('hello!');
insert into test_table2 (col2) values ('world!');
insert into test_table2 (col2) values ('#another one!!');
commit;

select * from test_table2;

insert into test_table2 (col1,col2) values (999, 'Full control!’);

commit;

select * from test_table2;

insert into test_table (col1,col2) values (999, 'Full control!');

drop table test_table;


